<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Текстовая RPG игра</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        .health-bar, .mana-bar {
            height: 20px;
            margin: 10px 0;
            background-color: #ccc;
            border-radius: 10px;
            overflow: hidden;
        }
        .health {
            background-color: red;
            height: 100%;
            width: 100%;
            transition: width 0.5s;
        }
        .mana {
            background-color: blue;
            height: 100%;
            width: 100%;
            transition: width 0.5s;
        }
        .buttons {
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            margin: 0 10px;
            font-size: 16px;
            cursor: pointer;
        }
        .inventory {
            margin: 20px 0;
            padding: 10px;
            background-color: #fff;
            border-radius: 10px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <h1>Текстовая RPG игра</h1>
    <div class="health-bar">
        <div class="health" id="health"></div>
    </div>
    <div class="mana-bar">
        <div class="mana" id="mana"></div>
    </div>
    <div class="buttons">
        <button onclick="travel()">Путешествие</button>
        <button onclick="goToTown()">Поход в город</button>
        <button onclick="craft()">Крафт</button>
        <button onclick="saveProgress()">Сохранить прогресс</button>
        <button onclick="loadProgress()">Загрузить прогресс</button>
    </div>
    <div class="inventory">
        <h2>Инвентарь</h2>
        <p>Палки: <span id="sticks">0</span></p>
        <p>Грибы: <span id="mushrooms">0</span></p>
        <p>Ягоды: <span id="berries">0</span></p>
        <p>Камни: <span id="stones">0</span></p>
        <p>Монеты: <span id="coins">0</span></p>
    </div>

    <script>
        let health = 100;
        let mana = 100;
        let sticks = 0;
        let mushrooms = 0;
        let berries = 0;
        let stones = 0;
        let coins = 0;

        function updateStats() {
            document.getElementById('health').style.width = health + '%';
            document.getElementById('mana').style.width = mana + '%';
            document.getElementById('sticks').textContent = sticks;
            document.getElementById('mushrooms').textContent = mushrooms;
            document.getElementById('berries').textContent = berries;
            document.getElementById('stones').textContent = stones;
            document.getElementById('coins').textContent = coins;
        }

        function travel() {
            if (health <= 0) {
                alert('Вы не можете путешествовать, так как у вас нет здоровья.');
                return;
            }

            health -= 10;
            if (health < 0) health = 0;

            const resources = ['sticks', 'mushrooms', 'berries', 'stones'];
            const randomResource = resources[Math.floor(Math.random() * resources.length)];
            const treasureChance = Math.random();

            if (treasureChance < 0.05) {
                const treasure = Math.floor(Math.random() * 36) + 15;
                coins += treasure;
                alert(`Вы нашли сокровище в размере ${treasure} золотых монет!`);
            } else {
                window[randomResource] += 1;
                alert(`Вы нашли ${getResourceName(randomResource)}.`);
            }

            updateStats();
        }

        function getResourceName(resource) {
            const names = {
                'sticks': 'палку',
                'mushrooms': 'гриб',
                'berries': 'ягоду',
                'stones': 'камень'
            };
            return names[resource];
        }

        function goToTown() {
            if (health <= 0) {
                alert('Вы не можете пойти в город, так как у вас нет здоровья.');
                return;
            }

            alert('Вы пошли в город на 30 секунд...');
            setTimeout(() => {
                const totalCoins = sticks * 1 + mushrooms * 2 + berries * 1 + stones * 3;
                coins += totalCoins;
                sticks = 0;
                mushrooms = 0;
                berries = 0;
                stones = 0;
                alert(`Вы продали все ресурсы и получили ${totalCoins} золотых монет.`);
                updateStats();
            }, 30000);
        }

        function craft() {
            if (health <= 0) {
                alert('Вы не можете крафтить, так как у вас нет здоровья.');
                return;
            }

            if (mana < 20) {
                alert('У вас недостаточно маны для крафта.');
                return;
            }

            mana -= 20;
            if (mana < 0) mana = 0;

            const crafts = ['каменный меч', 'каменную лопату', 'печку'];
            const randomCraft = crafts[Math.floor(Math.random() * crafts.length)];
            alert(`Вы создали ${randomCraft}.`);
            updateStats();
        }

        function saveProgress() {
            const progress = {
                health,
                mana,
                sticks,
                mushrooms,
                berries,
                stones,
                coins
            };
            localStorage.setItem('gameProgress', JSON.stringify(progress));
            alert('Прогресс сохранён!');
        }

        function loadProgress() {
            const savedProgress = localStorage.getItem('gameProgress');
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                health = progress.health;
                mana = progress.mana;
                sticks = progress.sticks;
                mushrooms = progress.mushrooms;
                berries = progress.berries;
                stones = progress.stones;
                coins = progress.coins;
                updateStats();
                alert('Прогресс загружен!');
            } else {
                alert('Нет сохранённого прогресса.');
            }
        }

        updateStats();
    </script>
</body>
</html>
